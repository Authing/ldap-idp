{"version":3,"file":"ldap-idp.umd.development.js","sources":["../src/index.ts"],"sourcesContent":["const ldap = require('ldapjs');\nconst MongoClient = require('mongodb').MongoClient;\nconst ldapdb = require('./ldapdb.json');\n\nconst assert = require('assert');\n\n// Connection URL\nconst url = [\n  'mongodb://',\n  ldapdb.user + ':' + ldapdb.password + '@',\n  ldapdb.ip,\n  ':',\n  ldapdb.port,\n  '/',\n  ldapdb.dbname,\n].join('');\n\n// Use connect method to connect to the server\nMongoClient.connect(url, function(_err: any, client: any) {\n  assert.equal(null, _err);\n  console.log(\"Connected successfully to server\");\n\n  // const insertDocuments = function(db, callback) {\n  //   // Get the documents collection\n  //   const collection = db.collection('documents');\n  //   // Insert some documents\n  //   collection.insertMany([\n  //     {a : 1}, {a : 2}, {a : 3}\n  //   ], function(err, result) {\n  //     assert.equal(err, null);\n  //     assert.equal(3, result.result.n);\n  //     assert.equal(3, result.ops.length);\n  //     console.log(\"Inserted 3 documents into the collection\");\n  //     callback(result);\n  //   });\n  // }\n\n  const findDocuments = function(db: any, callback: any) {\n    const collection = db.collection('users');\n    collection.find({}).toArray(function(err: any, docs: any) {\n      assert.equal(err, null);\n      callback(docs);\n    });\n  }  \n\n  const db = client.db(ldapdb.dbname);\n  \n  findDocuments(db, (users: any) => {\n    console.log(users);\n  });\n\n  client.close();\n});\n\n///--- Shared handlers\n\nfunction authorize(req: { connection: { ldap: { bindDN: { equals: (arg0: string) => string; }; }; }; }, _res: any, next: { (arg0: any): void; (): void; }) {\n  /* Any user may search after bind, only cn=root has full power */\n  var isSearch = (req instanceof ldap.SearchRequest);\n  if (!req.connection.ldap.bindDN.equals('cn=root') && !isSearch)\n    return next(new ldap.InsufficientAccessRightsError());\n\n  return next();\n}\n\n///--- Globals\n\nvar SUFFIX: string = 'o=joyent';\nvar db: any = {};\nvar server: any = ldap.createServer();\n\nserver.bind('cn=root', function(req: any, res: any, next: any) {\n  if (req.dn.toString() !== 'cn=root' || req.credentials !== 'secret')\n    return next(new ldap.InvalidCredentialsError());\n\n  res.end();\n  return next();\n});\n\nserver.add(SUFFIX, authorize, function(req: { dn: { toString: () => string; }; toObject: () => { attributes: any; }; }, res: { end: () => void; }, next: { (arg0: any): void; (): void; }) {\n  var dn = req.dn.toString();\n\n  if (db[dn])\n    return next(new ldap.EntryAlreadyExistsError(dn));\n\n  db[dn] = req.toObject().attributes;\n  res.end();\n  return next();\n});\n\nserver.bind(SUFFIX, function(req: { dn: { toString: () => string; }; credentials: any; }, res: { end: () => void; }, next: { (arg0: any): void; (arg0: any): void; (arg0: any): void; (): void; }) {\n  var dn = req.dn.toString();\n  if (!db[dn])\n    return next(new ldap.NoSuchObjectError(dn));\n\n  if (!db[dn].userpassword)\n    return next(new ldap.NoSuchAttributeError('userPassword'));\n\n  if (db[dn].userpassword.indexOf(req.credentials) === -1)\n    return next(new ldap.InvalidCredentialsError());\n\n  res.end();\n  return next();\n});\n\nserver.compare(SUFFIX, authorize, function(req: { dn: { toString: () => string; }; attribute: string | number; value: any; }, res: { end: (arg0: boolean) => void; }, next: { (arg0: any): void; (arg0: any): void; (): void; }) {\n  var dn = req.dn.toString();\n  if (!db[dn])\n    return next(new ldap.NoSuchObjectError(dn));\n\n  if (!db[dn][req.attribute])\n    return next(new ldap.NoSuchAttributeError(req.attribute));\n\n  var matches = false;\n  var vals = db[dn][req.attribute];\n  for (var i = 0; i < vals.length; i++) {\n    if (vals[i] === req.value) {\n      matches = true;\n      break;\n    }\n  }\n\n  res.end(matches);\n  return next();\n});\n\nserver.del(SUFFIX, authorize, function(req: { dn: { toString: () => string; }; }, res: { end: () => void; }, next: { (arg0: any): void; (): void; }) {\n  var dn = req.dn.toString();\n  if (!db[dn])\n    return next(new ldap.NoSuchObjectError(dn));\n\n  delete db[dn];\n\n  res.end();\n  return next();\n});\n\nserver.modify(SUFFIX, authorize, function(req: { dn: { toString: () => string; }; changes: { operation: any, modification: any; }[]; }, res: { end: () => void; }, next: { (arg0: any): void; (arg0: any): void; (arg0: any): void; (arg0: any): void; (): void; }) {\n  const dn = req.dn.toString();\n  let mod: any = null;\n  if (!req.changes.length)\n    return next(new ldap.ProtocolError('changes required'));\n  if (!db[dn])\n    return next(new ldap.NoSuchObjectError(dn));\n\n  var entry = db[dn];\n\n  for (var i = 0; i < req.changes.length; i++) {\n    mod = req.changes[i].modification;\n    switch (req.changes[i].operation) {\n    case 'replace':\n      if (!entry[mod.type])\n        return next(new ldap.NoSuchAttributeError(mod.type));\n\n      if (!mod.vals || !mod.vals.length) {\n        delete entry[mod.type];\n      } else {\n        entry[mod.type] = mod.vals;\n      }\n\n      break;\n\n    case 'add':\n      if (!entry[mod.type]) {\n        entry[mod.type] = mod.vals;\n      } else {\n        mod.vals.forEach(function(v: any) {\n          if (entry[mod.type].indexOf(v) === -1)\n            entry[mod.type].push(v);\n        });\n      }\n\n      break;\n\n    case 'delete':\n      if (!entry[mod.type])\n        return next(new ldap.NoSuchAttributeError(mod.type));\n\n      delete entry[mod.type];\n\n      break;\n    }\n  }\n\n  res.end();\n  return next();\n});\n\nserver.search(SUFFIX, authorize, function(req: { dn: { toString: () => string; equals: { (arg0: any): boolean; (arg0: any): boolean; }; parentOf: (arg0: any) => void; }; scope: any; filter: { matches: { (arg0: any): boolean; (arg0: any): boolean; }; }; }, res: { send: { (arg0: { dn: any; attributes: any; }): void; (arg0: { dn: string; attributes: any; }): void; }; end: { (): void; (): void; }; }, next: { (arg0: any): void; (): void; (): void; }) {\n  var dn = req.dn.toString();\n  if (!db[dn])\n    return next(new ldap.NoSuchObjectError(dn));\n\n  var scopeCheck: { (k: any): any; (k: any): any; (arg0: string): void; };\n\n  switch (req.scope) {\n  case 'base':\n    if (req.filter.matches(db[dn])) {\n      res.send({\n        dn: dn,\n        attributes: db[dn]\n      });\n    }\n\n    res.end();\n    return next();\n\n  case 'one':\n    scopeCheck = function(k: any) {\n      if (req.dn.equals(k))\n        return true;\n\n      var parent = ldap.parseDN(k).parent();\n      return (parent ? parent.equals(req.dn) : false);\n    };\n    break;\n\n  case 'sub':\n    scopeCheck = function(k: any) {\n      return (req.dn.equals(k) || req.dn.parentOf(k));\n    };\n\n    break;\n  }\n\n  Object.keys(db).forEach(function(key) {\n    if (!scopeCheck(key))\n      return;\n\n    if (req.filter.matches(db[key])) {\n      res.send({\n        dn: key,\n        attributes: db[key]\n      });\n    }\n  });\n\n  res.end();\n  return next();\n});\n\n///--- Fire it up\n\nserver.listen(1389, function() {\n  console.log('LDAP server up at: %s', server.url);\n});"],"names":["ldap","require","MongoClient","ldapdb","assert","url","user","password","ip","port","dbname","join","connect","_err","client","equal","console","log","findDocuments","db","callback","collection","find","toArray","err","docs","users","close","authorize","req","_res","next","isSearch","SearchRequest","connection","bindDN","equals","InsufficientAccessRightsError","SUFFIX","server","createServer","bind","res","dn","toString","credentials","InvalidCredentialsError","end","add","EntryAlreadyExistsError","toObject","attributes","NoSuchObjectError","userpassword","NoSuchAttributeError","indexOf","compare","attribute","matches","vals","i","length","value","del","modify","mod","changes","ProtocolError","entry","modification","operation","type","forEach","v","push","search","scopeCheck","scope","filter","send","k","parent","parseDN","parentOf","Object","keys","key","listen"],"mappings":";;;;;EAAA,MAAMA,IAAI;EAAA;EAAGC,OAAO,CAAC,QAAD,CAApB;;EACA,MAAMC,WAAW;EAAG;EAAAD,OAAO,CAAC,SAAD,CAAP,CAAmBC,WAAvC;;EACA,MAAMC,MAAM;EAAA;EAAGF,OAAO,CAAC,eAAD,CAAtB;;EAEA,MAAMG,MAAM;EAAA;EAAGH,OAAO,CAAC,QAAD,CAAtB;;;EAGA,MAAMI,GAAG;EAAA;EAAG,CACV,YADU,EAEVF,MAAM,CAACG,IAAP,GAAc,GAAd,GAAoBH,MAAM,CAACI,QAA3B,GAAsC,GAF5B,EAGVJ,MAAM,CAACK,EAHG,EAIV,GAJU,EAKVL,MAAM,CAACM,IALG,EAMV,GANU,EAOVN,MAAM,CAACO,MAPG,EAQVC,IARU,CAQL,EARK,CAAZ;;EAWAT,WAAW,CAACU,OAAZ,CAAoBP,GAApB,EAAyB,UAASQ,IAAT,EAAoBC,MAApB;EACvBV,EAAAA,MAAM,CAACW,KAAP,CAAa,IAAb,EAAmBF,IAAnB;EACAG,EAAAA,OAAO,CAACC,GAAR,CAAY,kCAAZ;EAGA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,QAAMC,aAAa,GAAG,UAASC,EAAT,EAAkBC,QAAlB;EACpB,UAAMC,UAAU,GAAGF,EAAE,CAACE,UAAH,CAAc,OAAd,CAAnB;EACAA,IAAAA,UAAU,CAACC,IAAX,CAAgB,EAAhB,EAAoBC,OAApB,CAA4B,UAASC,GAAT,EAAmBC,IAAnB;EAC1BrB,MAAAA,MAAM,CAACW,KAAP,CAAaS,GAAb,EAAkB,IAAlB;EACAJ,MAAAA,QAAQ,CAACK,IAAD,CAAR;EACD,KAHD;EAID,GAND;;EAQA,QAAMN,EAAE,GAAGL,MAAM,CAACK,EAAP,CAAUhB,MAAM,CAACO,MAAjB,CAAX;EAEAQ,EAAAA,aAAa,CAACC,EAAD,EAAMO,KAAD;EAChBV,IAAAA,OAAO,CAACC,GAAR,CAAYS,KAAZ;EACD,GAFY,CAAb;EAIAZ,EAAAA,MAAM,CAACa,KAAP;EACD,CAlCD;;EAsCA,SAASC,SAAT,CAAmBC,GAAnB,EAAwGC,IAAxG,EAAmHC,IAAnH;EACE;EACA,MAAIC,QAAQ,GAAIH,GAAG,YAAY7B,IAAI,CAACiC,aAApC;EACA,MAAI,CAACJ,GAAG,CAACK,UAAJ,CAAelC,IAAf,CAAoBmC,MAApB,CAA2BC,MAA3B,CAAkC,SAAlC,CAAD,IAAiD,CAACJ,QAAtD,EACE,OAAOD,IAAI,CAAC,IAAI/B,IAAI,CAACqC,6BAAT,EAAD,CAAX;EAEF,SAAON,IAAI,EAAX;EACD;;;EAID,IAAIO,MAAM,GAAW,UAArB;EACA,IAAInB,EAAE,GAAQ,EAAd;EACA,IAAIoB,MAAM;EAAA;EAAQvC,IAAI,CAACwC,YAAL,EAAlB;EAEAD,MAAM,CAACE,IAAP,CAAY,SAAZ,EAAuB,UAASZ,GAAT,EAAmBa,GAAnB,EAA6BX,IAA7B;EACrB,MAAIF,GAAG,CAACc,EAAJ,CAAOC,QAAP,OAAsB,SAAtB,IAAmCf,GAAG,CAACgB,WAAJ,KAAoB,QAA3D,EACE,OAAOd,IAAI,CAAC,IAAI/B,IAAI,CAAC8C,uBAAT,EAAD,CAAX;EAEFJ,EAAAA,GAAG,CAACK,GAAJ;EACA,SAAOhB,IAAI,EAAX;EACD,CAND;EAQAQ,MAAM,CAACS,GAAP,CAAWV,MAAX,EAAmBV,SAAnB,EAA8B,UAASC,GAAT,EAA0Fa,GAA1F,EAAqHX,IAArH;EAC5B,MAAIY,EAAE,GAAGd,GAAG,CAACc,EAAJ,CAAOC,QAAP,EAAT;EAEA,MAAIzB,EAAE,CAACwB,EAAD,CAAN,EACE,OAAOZ,IAAI,CAAC,IAAI/B,IAAI,CAACiD,uBAAT,CAAiCN,EAAjC,CAAD,CAAX;EAEFxB,EAAAA,EAAE,CAACwB,EAAD,CAAF,GAASd,GAAG,CAACqB,QAAJ,GAAeC,UAAxB;EACAT,EAAAA,GAAG,CAACK,GAAJ;EACA,SAAOhB,IAAI,EAAX;EACD,CATD;EAWAQ,MAAM,CAACE,IAAP,CAAYH,MAAZ,EAAoB,UAAST,GAAT,EAAsEa,GAAtE,EAAiGX,IAAjG;EAClB,MAAIY,EAAE,GAAGd,GAAG,CAACc,EAAJ,CAAOC,QAAP,EAAT;EACA,MAAI,CAACzB,EAAE,CAACwB,EAAD,CAAP,EACE,OAAOZ,IAAI,CAAC,IAAI/B,IAAI,CAACoD,iBAAT,CAA2BT,EAA3B,CAAD,CAAX;EAEF,MAAI,CAACxB,EAAE,CAACwB,EAAD,CAAF,CAAOU,YAAZ,EACE,OAAOtB,IAAI,CAAC,IAAI/B,IAAI,CAACsD,oBAAT,CAA8B,cAA9B,CAAD,CAAX;EAEF,MAAInC,EAAE,CAACwB,EAAD,CAAF,CAAOU,YAAP,CAAoBE,OAApB,CAA4B1B,GAAG,CAACgB,WAAhC,MAAiD,CAAC,CAAtD,EACE,OAAOd,IAAI,CAAC,IAAI/B,IAAI,CAAC8C,uBAAT,EAAD,CAAX;EAEFJ,EAAAA,GAAG,CAACK,GAAJ;EACA,SAAOhB,IAAI,EAAX;EACD,CAbD;EAeAQ,MAAM,CAACiB,OAAP,CAAelB,MAAf,EAAuBV,SAAvB,EAAkC,UAASC,GAAT,EAA4Fa,GAA5F,EAAoIX,IAApI;EAChC,MAAIY,EAAE,GAAGd,GAAG,CAACc,EAAJ,CAAOC,QAAP,EAAT;EACA,MAAI,CAACzB,EAAE,CAACwB,EAAD,CAAP,EACE,OAAOZ,IAAI,CAAC,IAAI/B,IAAI,CAACoD,iBAAT,CAA2BT,EAA3B,CAAD,CAAX;EAEF,MAAI,CAACxB,EAAE,CAACwB,EAAD,CAAF,CAAOd,GAAG,CAAC4B,SAAX,CAAL,EACE,OAAO1B,IAAI,CAAC,IAAI/B,IAAI,CAACsD,oBAAT,CAA8BzB,GAAG,CAAC4B,SAAlC,CAAD,CAAX;EAEF,MAAIC,OAAO,GAAG,KAAd;EACA,MAAIC,IAAI,GAAGxC,EAAE,CAACwB,EAAD,CAAF,CAAOd,GAAG,CAAC4B,SAAX,CAAX;;EACA,OAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,IAAI,CAACE,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;EACpC,QAAID,IAAI,CAACC,CAAD,CAAJ,KAAY/B,GAAG,CAACiC,KAApB,EAA2B;EACzBJ,MAAAA,OAAO,GAAG,IAAV;EACA;EACD;EACF;;EAEDhB,EAAAA,GAAG,CAACK,GAAJ,CAAQW,OAAR;EACA,SAAO3B,IAAI,EAAX;EACD,CAnBD;EAqBAQ,MAAM,CAACwB,GAAP,CAAWzB,MAAX,EAAmBV,SAAnB,EAA8B,UAASC,GAAT,EAAoDa,GAApD,EAA+EX,IAA/E;EAC5B,MAAIY,EAAE,GAAGd,GAAG,CAACc,EAAJ,CAAOC,QAAP,EAAT;EACA,MAAI,CAACzB,EAAE,CAACwB,EAAD,CAAP,EACE,OAAOZ,IAAI,CAAC,IAAI/B,IAAI,CAACoD,iBAAT,CAA2BT,EAA3B,CAAD,CAAX;EAEF,SAAOxB,EAAE,CAACwB,EAAD,CAAT;EAEAD,EAAAA,GAAG,CAACK,GAAJ;EACA,SAAOhB,IAAI,EAAX;EACD,CATD;EAWAQ,MAAM,CAACyB,MAAP,CAAc1B,MAAd,EAAsBV,SAAtB,EAAiC,UAASC,GAAT,EAAuGa,GAAvG,EAAkIX,IAAlI;EAC/B,QAAMY,EAAE,GAAGd,GAAG,CAACc,EAAJ,CAAOC,QAAP,EAAX;EACA,MAAIqB,GAAG,GAAQ,IAAf;EACA,MAAI,CAACpC,GAAG,CAACqC,OAAJ,CAAYL,MAAjB,EACE,OAAO9B,IAAI,CAAC,IAAI/B,IAAI,CAACmE,aAAT,CAAuB,kBAAvB,CAAD,CAAX;EACF,MAAI,CAAChD,EAAE,CAACwB,EAAD,CAAP,EACE,OAAOZ,IAAI,CAAC,IAAI/B,IAAI,CAACoD,iBAAT,CAA2BT,EAA3B,CAAD,CAAX;EAEF,MAAIyB,KAAK,GAAGjD,EAAE,CAACwB,EAAD,CAAd;;EAEA,OAAK,IAAIiB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG/B,GAAG,CAACqC,OAAJ,CAAYL,MAAhC,EAAwCD,CAAC,EAAzC,EAA6C;EAC3CK,IAAAA,GAAG,GAAGpC,GAAG,CAACqC,OAAJ,CAAYN,CAAZ,EAAeS,YAArB;;EACA,YAAQxC,GAAG,CAACqC,OAAJ,CAAYN,CAAZ,EAAeU,SAAvB;EACA,WAAK,SAAL;EACE,YAAI,CAACF,KAAK,CAACH,GAAG,CAACM,IAAL,CAAV,EACE,OAAOxC,IAAI,CAAC,IAAI/B,IAAI,CAACsD,oBAAT,CAA8BW,GAAG,CAACM,IAAlC,CAAD,CAAX;;EAEF,YAAI,CAACN,GAAG,CAACN,IAAL,IAAa,CAACM,GAAG,CAACN,IAAJ,CAASE,MAA3B,EAAmC;EACjC,iBAAOO,KAAK,CAACH,GAAG,CAACM,IAAL,CAAZ;EACD,SAFD,MAEO;EACLH,UAAAA,KAAK,CAACH,GAAG,CAACM,IAAL,CAAL,GAAkBN,GAAG,CAACN,IAAtB;EACD;;EAED;;EAEF,WAAK,KAAL;EACE,YAAI,CAACS,KAAK,CAACH,GAAG,CAACM,IAAL,CAAV,EAAsB;EACpBH,UAAAA,KAAK,CAACH,GAAG,CAACM,IAAL,CAAL,GAAkBN,GAAG,CAACN,IAAtB;EACD,SAFD,MAEO;EACLM,UAAAA,GAAG,CAACN,IAAJ,CAASa,OAAT,CAAiB,UAASC,CAAT;EACf,gBAAIL,KAAK,CAACH,GAAG,CAACM,IAAL,CAAL,CAAgBhB,OAAhB,CAAwBkB,CAAxB,MAA+B,CAAC,CAApC,EACEL,KAAK,CAACH,GAAG,CAACM,IAAL,CAAL,CAAgBG,IAAhB,CAAqBD,CAArB;EACH,WAHD;EAID;;EAED;;EAEF,WAAK,QAAL;EACE,YAAI,CAACL,KAAK,CAACH,GAAG,CAACM,IAAL,CAAV,EACE,OAAOxC,IAAI,CAAC,IAAI/B,IAAI,CAACsD,oBAAT,CAA8BW,GAAG,CAACM,IAAlC,CAAD,CAAX;EAEF,eAAOH,KAAK,CAACH,GAAG,CAACM,IAAL,CAAZ;EAEA;EA/BF;EAiCD;;EAED7B,EAAAA,GAAG,CAACK,GAAJ;EACA,SAAOhB,IAAI,EAAX;EACD,CAjDD;EAmDAQ,MAAM,CAACoC,MAAP,CAAcrC,MAAd,EAAsBV,SAAtB,EAAiC,UAASC,GAAT,EAA+Na,GAA/N,EAA+WX,IAA/W;EAC/B,MAAIY,EAAE,GAAGd,GAAG,CAACc,EAAJ,CAAOC,QAAP,EAAT;EACA,MAAI,CAACzB,EAAE,CAACwB,EAAD,CAAP,EACE,OAAOZ,IAAI,CAAC,IAAI/B,IAAI,CAACoD,iBAAT,CAA2BT,EAA3B,CAAD,CAAX;EAEF,MAAIiC,UAAJ;;EAEA,UAAQ/C,GAAG,CAACgD,KAAZ;EACA,SAAK,MAAL;EACE,UAAIhD,GAAG,CAACiD,MAAJ,CAAWpB,OAAX,CAAmBvC,EAAE,CAACwB,EAAD,CAArB,CAAJ,EAAgC;EAC9BD,QAAAA,GAAG,CAACqC,IAAJ,CAAS;EACPpC,UAAAA,EAAE,EAAEA,EADG;EAEPQ,UAAAA,UAAU,EAAEhC,EAAE,CAACwB,EAAD;EAFP,SAAT;EAID;;EAEDD,MAAAA,GAAG,CAACK,GAAJ;EACA,aAAOhB,IAAI,EAAX;;EAEF,SAAK,KAAL;EACE6C,MAAAA,UAAU,GAAG,UAASI,CAAT;EACX,YAAInD,GAAG,CAACc,EAAJ,CAAOP,MAAP,CAAc4C,CAAd,CAAJ,EACE,OAAO,IAAP;EAEF,YAAIC,MAAM,GAAGjF,IAAI,CAACkF,OAAL,CAAaF,CAAb,EAAgBC,MAAhB,EAAb;EACA,eAAQA,MAAM,GAAGA,MAAM,CAAC7C,MAAP,CAAcP,GAAG,CAACc,EAAlB,CAAH,GAA2B,KAAzC;EACD,OAND;;EAOA;;EAEF,SAAK,KAAL;EACEiC,MAAAA,UAAU,GAAG,UAASI,CAAT;EACX,eAAQnD,GAAG,CAACc,EAAJ,CAAOP,MAAP,CAAc4C,CAAd,KAAoBnD,GAAG,CAACc,EAAJ,CAAOwC,QAAP,CAAgBH,CAAhB,CAA5B;EACD,OAFD;;EAIA;EA3BF;;EA8BAI,EAAAA,MAAM,CAACC,IAAP,CAAYlE,EAAZ,EAAgBqD,OAAhB,CAAwB,UAASc,GAAT;EACtB,QAAI,CAACV,UAAU,CAACU,GAAD,CAAf,EACE;;EAEF,QAAIzD,GAAG,CAACiD,MAAJ,CAAWpB,OAAX,CAAmBvC,EAAE,CAACmE,GAAD,CAArB,CAAJ,EAAiC;EAC/B5C,MAAAA,GAAG,CAACqC,IAAJ,CAAS;EACPpC,QAAAA,EAAE,EAAE2C,GADG;EAEPnC,QAAAA,UAAU,EAAEhC,EAAE,CAACmE,GAAD;EAFP,OAAT;EAID;EACF,GAVD;EAYA5C,EAAAA,GAAG,CAACK,GAAJ;EACA,SAAOhB,IAAI,EAAX;EACD,CAnDD;;EAuDAQ,MAAM,CAACgD,MAAP,CAAc,IAAd,EAAoB;EAClBvE,EAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ,EAAqCsB,MAAM,CAAClC,GAA5C;EACD,CAFD;;;;"}